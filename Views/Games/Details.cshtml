@model webstats.Models.GameScoreViewModel

@{
    ViewBag.Title = "Game Details";
}

<h2>Game Details</h2>

<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.game.name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.game.name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.game.genre)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.game.genre)
        </dd>
<div>
    <h3 class="" style="">Scores</h3>
    <p class="" style="">Best scores for @Model.game.name</p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.users.FirstOrDefault().UserName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.scores.FirstOrDefault().score)
            </th>
            <th></th>
        </tr>

            @foreach (var score in Model.scores)
            {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => Model.users.Find(x=>x.Id.Equals(score.UserID)).UserName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => score.score)
                        </td>
                    </tr>
            }

    </table>
</div>

    </dl>
</div>
<p>
    @{
        if (User.IsInRole("Admin"))
        {
            @Html.ActionLink("Edit", "Edit", new { id = Model.game.GameID })
            @:|
        }
    }
    @Html.ActionLink("All Games", "Index")
</p>
